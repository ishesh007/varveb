<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Varnika â€” Clothing Store</title>
  <style>
    /* Base reset and typography */
    :root{
      --bg:#0f1225;
      --card:#151936;
      --soft:#1d2250;
      --accent:#8b7bff;
      --accent-2:#4ad4ff;
      --text:#eef0ff;
      --muted:#aab0d6;
      --good:#2ed47a;
      --warn:#ffb648;
      --bad:#ff6b6b;
      --shadow: 0 10px 30px rgba(0,0,0,.25);
      --radius:14px;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Apple Color Emoji", "Segoe UI Emoji";
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(138,123,255,.20), transparent 60%),
        radial-gradient(1000px 500px at 100% 0, rgba(74,212,255,.18), transparent 60%),
        radial-gradient(800px 400px at 50% 120%, rgba(46,212,122,.12), transparent 60%),
        var(--bg);
      background-attachment: fixed;
      line-height:1.5;
    }
    a{color:inherit;text-decoration:none}
    img{max-width:100%;display:block}

    /* Layout */
    .container{
      width:min(1200px, 92vw);
      margin:0 auto;
      padding:24px 0 64px;
    }

    /* Header */
    .header{
      position:sticky; top:0; z-index:50;
      backdrop-filter: blur(10px);
      background:linear-gradient(180deg, rgba(15,18,37,.9), rgba(15,18,37,.6));
      border-bottom:1px solid rgba(255,255,255,.06);
    }
    .header-inner{
      width:min(1200px, 92vw);
      margin:0 auto;
      display:flex; align-items:center; gap:16px;
      padding:16px 0;
    }
    .brand{
      display:flex; align-items:center; gap:12px;
      font-weight:800; letter-spacing:.4px; font-size:20px;
    }
    .logo{
      width:38px;height:38px;border-radius:12px;
      background:
        conic-gradient(from 220deg, var(--accent), var(--accent-2), var(--good), var(--accent));
      box-shadow: 0 6px 18px rgba(139,123,255,.35);
      position:relative; overflow:hidden;
    }
    .logo::after{
      content:""; position:absolute; inset:2px; border-radius:10px;
      background:linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,0));
    }
    .header-actions{
      display:flex; align-items:center; gap:12px; margin-left:auto;
    }

    /* Search */
    .search{
      flex:1;
      display:flex; align-items:center; gap:10px;
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      border-radius:12px; padding:10px 12px;
    }
    .search input{
      background:transparent; border:none; outline:none; color:var(--text);
      width:100%; font-size:14px;
    }
    .chip{
      padding:8px 12px; border-radius:999px;
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
      border:1px solid rgba(255,255,255,.10);
      color:var(--text); font-size:13px; cursor:pointer;
      transition:.2s transform,.2s background;
      white-space:nowrap;
    }
    .chip.active{
      background:linear-gradient(180deg, rgba(139,123,255,.35), rgba(139,123,255,.18));
      border-color: rgba(139,123,255,.55);
      box-shadow: 0 8px 22px rgba(139,123,255,.25);
    }
    .chip:hover{transform:translateY(-1px)}

    /* Icon buttons */
    .icon-btn{
      position:relative;
      display:inline-flex; align-items:center; justify-content:center;
      width:42px;height:42px;border-radius:12px; cursor:pointer;
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
      border:1px solid rgba(255,255,255,.10);
      transition:.2s transform, .2s box-shadow, .2s background;
    }
    .icon-btn:hover{
      transform:translateY(-1px);
      box-shadow:0 10px 20px rgba(0,0,0,.25);
      background:linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.06));
    }
    .badge{
      position:absolute; top:-6px; right:-6px;
      background:var(--bad); color:white; font-weight:700;
      font-size:11px; padding:3px 7px; border-radius:999px;
      box-shadow: 0 6px 16px rgba(255,107,107,.5);
    }

    /* Hero */
    .hero{
      margin:26px 0 14px;
      display:grid; grid-template-columns:1.2fr .8fr; gap:18px;
    }
    .panel{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .hero-main{
      padding:28px;
      display:grid; grid-template-columns:1.2fr .8fr; gap:24px; align-items:center;
      min-height:220px;
    }
    .hero-title{
      font-weight:900; font-size:36px; line-height:1.1; margin:0 0 10px;
    }
    .hero-sub{color:var(--muted); font-size:14px}
    .cta{
      margin-top:16px; display:flex; gap:10px; flex-wrap:wrap;
    }
    .btn{
      padding:10px 14px; border-radius:12px; cursor:pointer;
      border:1px solid rgba(255,255,255,.12);
      background:linear-gradient(180deg, rgba(139,123,255,.35), rgba(139,123,255,.18));
      color:white; font-weight:700;
      transition:.2s transform,.2s box-shadow,.2s background;
    }
    .btn:hover{transform:translateY(-1px); box-shadow:0 10px 22px rgba(139,123,255,.35)}
    .btn.alt{background:linear-gradient(180deg, rgba(74,212,255,.35), rgba(74,212,255,.18)); border-color: rgba(74,212,255,.5)}
    .hero-side{
      padding:24px;
      background:
        radial-gradient(500px 200px at 110% -20%, rgba(139,123,255,.25), transparent 60%),
        linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      display:flex; flex-direction:column; gap:10px; justify-content:center;
      min-height:220px;
    }
    .hero-side h3{margin:0;font-size:18px}
    .hero-side p{margin:0;color:var(--muted);font-size:13px}

    /* Filters row */
    .filters{
      display:flex; gap:10px; flex-wrap:wrap; align-items:center;
      margin:18px 0 8px;
    }

    /* Grid */
    .grid{
      display:grid; gap:16px;
      grid-template-columns: repeat(4, 1fr);
    }
    @media (max-width:1000px){ .grid{grid-template-columns: repeat(3, 1fr);} .hero{grid-template-columns:1fr} .hero-main{grid-template-columns:1fr} }
    @media (max-width:700px){ .grid{grid-template-columns: repeat(2, 1fr);} .hero-title{font-size:28px} }
    @media (max-width:480px){ .grid{grid-template-columns: 1fr;} }

    /* Product card */
    .card{
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      border-radius:16px; overflow:hidden; box-shadow:var(--shadow);
      display:flex; flex-direction:column;
      transition:.2s transform,.2s box-shadow;
    }
    .card:hover{transform:translateY(-3px); box-shadow:0 18px 34px rgba(0,0,0,.35)}
    .thumb{
      position:relative; padding-top:74%; overflow:hidden; background:linear-gradient(120deg, rgba(139,123,255,.2), rgba(74,212,255,.18));
    }
    .thumb svg{
      position:absolute; inset:0; width:100%; height:100%;
    }
    .pill{
      position:absolute; top:10px; left:10px; font-size:12px; font-weight:700;
      padding:6px 10px; border-radius:999px; background:rgba(46,212,122,.15); color:#c0ffd8;
      border:1px solid rgba(46,212,122,.45); backdrop-filter: blur(4px);
    }
    .card-body{padding:14px}
    .title{font-weight:800; margin:0 0 4px; font-size:15px}
    .meta{color:var(--muted); font-size:12px; margin-bottom:10px}
    .price-row{display:flex; align-items:center; justify-content:space-between}
    .price{font-weight:900; font-size:18px}
    .add{
      padding:8px 12px; border-radius:10px; cursor:pointer;
      border:1px solid rgba(255,255,255,.12);
      background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.04));
      color:var(--text); font-weight:700;
    }
    .add:hover{background:linear-gradient(180deg, rgba(255,255,255,.16), rgba(255,255,255,.06))}

    /* Cart drawer */
    .drawer{
      position:fixed; right:0; top:0; bottom:0; width:380px; max-width:90vw;
      background:linear-gradient(180deg, rgba(21,25,54,.98), rgba(21,25,54,.95));
      border-left:1px solid rgba(255,255,255,.08);
      transform:translateX(100%); transition:.3s transform ease;
      z-index:100;
      display:flex; flex-direction:column;
      box-shadow:-20px 0 40px rgba(0,0,0,.35);
    }
    .drawer.open{transform:translateX(0)}
    .drawer-head{
      padding:16px; display:flex; align-items:center; justify-content:space-between;
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .drawer-body{padding:12px 16px; overflow:auto; flex:1}
    .cart-empty{
      text-align:center; color:var(--muted); padding:32px 10px;
    }
    .cart-item{
      display:grid; grid-template-columns:56px 1fr auto; gap:12px;
      background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid rgba(255,255,255,.10);
      border-radius:12px; padding:10px; margin-bottom:10px;
    }
    .thumb-sm{
      width:56px; height:56px; border-radius:10px; overflow:hidden; background:linear-gradient(120deg, rgba(139,123,255,.2), rgba(74,212,255,.18));
    }
    .qty{
      display:inline-flex; align-items:center; gap:8px; background:rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10); padding:6px 8px; border-radius:999px; font-size:13px;
    }
    .link{
      color:#bfc6ff; cursor:pointer; font-size:12px;
    }
    .link:hover{text-decoration:underline}
    .drawer-foot{
      border-top:1px solid rgba(255,255,255,.08);
      padding:14px 16px; display:grid; gap:10px;
      background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.00));
    }
    .row{display:flex; align-items:center; justify-content:space-between; color:var(--muted)}
    .total{font-weight:900; font-size:20px; color:var(--text)}
    .checkout{
      padding:12px 14px; border-radius:12px; cursor:pointer; font-weight:900;
      background:linear-gradient(180deg, rgba(46,212,122,.40), rgba(46,212,122,.22));
      border:1px solid rgba(46,212,122,.6); color:white;
      box-shadow:0 10px 24px rgba(46,212,122,.35);
    }
    .checkout:hover{transform:translateY(-1px)}
    .demo-note{font-size:12px; color:#d2d7ff; opacity:.9}

    /* Overlay */
    .overlay{
      position:fixed; inset:0; background:rgba(0,0,0,.45);
      opacity:0; pointer-events:none; transition:.25s opacity; z-index:90;
    }
    .overlay.show{opacity:1; pointer-events:auto}

    /* Quick view modal */
    .modal{
      position:fixed; inset:0; display:grid; place-items:center; z-index:120;
      opacity:0; pointer-events:none; transition:.25s opacity;
    }
    .modal.show{opacity:1; pointer-events:auto}
    .modal-card{
      width:min(680px, 92vw); background:linear-gradient(180deg, rgba(255,255,255,.08), rgba(255,255,255,.03));
      border:1px solid rgba(255,255,255,.12);
      border-radius:16px; box-shadow:var(--shadow); overflow:hidden;
      display:grid; grid-template-columns:1fr 1fr;
    }
    .modal-media{background:linear-gradient(120deg, rgba(139,123,255,.25), rgba(74,212,255,.18))}
    .modal-body{padding:18px}
    .modal h3{margin:0 0 6px}
    .modal p{margin:0 0 10px; color:var(--muted)}
    .modal .close{
      position:absolute; top:10px; right:10px;
    }
    @media (max-width:650px){
      .modal-card{grid-template-columns:1fr}
    }

    /* Footer */
    .footer{
      margin-top:36px;
      color:var(--muted);
      font-size:13px;
      display:flex; justify-content:space-between; align-items:center;
      padding:18px 0 0;
      border-top:1px solid rgba(255,255,255,.06);
    }
  </style>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-inner">
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        Varnika
      </div>

      <div class="search" role="search">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" aria-hidden="true">
          <path d="M21 21l-4.3-4.3m1.8-5.2a7 7 0 1 1-14 0 7 7 0 0 1 14 0z" stroke="rgba(255,255,255,.7)" stroke-width="2" stroke-linecap="round"/>
        </svg>
        <input id="searchInput" type="text" placeholder="Search for tees, dresses, jackets..." aria-label="Search products"/>
      </div>

      <div class="header-actions">
        <button id="openCart" class="icon-btn" aria-label="Open cart">
          <svg width="22" height="22" viewBox="0 0 24 24" fill="none" aria-hidden="true">
            <path d="M6 6h15l-1.5 9h-11L6 3H2" stroke="rgba(255,255,255,.8)" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="9" cy="20" r="1.5" fill="rgba(255,255,255,.8)"/>
            <circle cx="18" cy="20" r="1.5" fill="rgba(255,255,255,.8)"/>
          </svg>
          <span id="cartCount" class="badge" aria-live="polite">0</span>
        </button>
      </div>
    </div>
  </header>

  <main class="container">
    <!-- Hero -->
    <section class="hero">
      <div class="panel hero-main">
        <div>
          <h1 class="hero-title">Wear the mood. Feel the moment.</h1>
          <p class="hero-sub">Curated styles crafted for comfort and expression. Sustainable fabrics, timeless fitsâ€”this is Varnika.</p>
          <div class="cta">
            <button class="btn" id="shopNew">Shop New Arrivals</button>
            <button class="btn alt" id="shopBest">Best Sellers</button>
          </div>
        </div>
        <div>
          <svg viewBox="0 0 400 280" width="100%" height="100%" aria-hidden="true">
            <defs>
              <linearGradient id="g1" x1="0" x2="1">
                <stop offset="0" stop-color="#8b7bff" stop-opacity=".9"/>
                <stop offset="1" stop-color="#4ad4ff" stop-opacity=".9"/>
              </linearGradient>
            </defs>
            <rect x="20" y="20" width="360" height="240" rx="22" fill="url(#g1)" opacity=".25"/>
            <g opacity=".9">
              <circle cx="120" cy="140" r="70" fill="#8b7bff" opacity=".35"/>
              <circle cx="210" cy="120" r="50" fill="#4ad4ff" opacity=".35"/>
              <circle cx="260" cy="170" r="60" fill="#2ed47a" opacity=".25"/>
            </g>
            <text x="200" y="150" text-anchor="middle" fill="#eef0ff" font-size="22" font-weight="800" opacity=".9">Varnika Studio</text>
          </svg>
        </div>
      </div>
      <div class="panel hero-side">
        <h3>Free shipping over $50</h3>
        <p>Fast dispatch. Easy 30-day returns.</p>
        <h3>Spring â€™25 Palette</h3>
        <p>Soft lilacs, ocean blues, and calm neutrals.</p>
      </div>
    </section>

    <!-- Filters -->
    <section class="filters" aria-label="Filters">
      <button class="chip active" data-filter="all">All</button>
      <button class="chip" data-filter="Tops">Tops</button>
      <button class="chip" data-filter="Dresses">Dresses</button>
      <button class="chip" data-filter="Outerwear">Outerwear</button>
      <button class="chip" data-filter="Bottoms">Bottoms</button>
      <button class="chip" data-filter="Accessories">Accessories</button>
      <span style="margin-left:auto; color:var(--muted); font-size:13px">Showing <span id="countVisible">0</span> items</span>
    </section>

    <!-- Products Grid -->
    <section class="grid" id="productGrid" aria-live="polite">
      <!-- Cards will be injected by JS -->
    </section>

    <!-- Footer -->
    <footer class="footer">
      <span>Â© <span id="year"></span> Varnika. All rights reserved.</span>
      <span>Demo checkout only. No real payments.</span>
    </footer>
  </main>

  <!-- Cart Drawer -->
  <aside class="drawer" id="cartDrawer" aria-hidden="true" aria-label="Shopping cart">
    <div class="drawer-head">
      <strong>My Cart</strong>
      <button class="icon-btn" id="closeCart" aria-label="Close cart">
        <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
          <path d="M6 6l12 12M18 6L6 18" stroke="rgba(255,255,255,.85)" stroke-width="2" stroke-linecap="round"/>
        </svg>
      </button>
    </div>
    <div class="drawer-body" id="cartItems">
      <div class="cart-empty">Your cart is empty. Start exploring the collection!</div>
    </div>
    <div class="drawer-foot">
      <div class="row"><span>Subtotal</span><strong id="subtotal">$0.00</strong></div>
      <div class="row"><span>Shipping</span><span>Calculated at checkout</span></div>
      <div class="row"><span>Tax</span><span>Est.</span></div>
      <div class="row" style="margin-top:6px"><span class="total">Total</span><span class="total" id="total">$0.00</span></div>
      <button class="checkout" id="checkoutBtn">Proceed to Checkout</button>
      <div class="demo-note">Demo only: this simulates a checkout summary. No payment is processed.</div>
    </div>
  </aside>

  <!-- Overlay -->
  <div class="overlay" id="overlay"></div>

  <!-- Quick View Modal -->
  <div class="modal" id="quickModal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="modal-card">
      <div class="modal-media" id="modalMedia">
        <svg viewBox="0 0 400 320" width="100%" height="100%">
          <defs>
            <linearGradient id="mg" x1="0" x2="1">
              <stop offset="0" stop-color="#8b7bff" stop-opacity=".9"/>
              <stop offset="1" stop-color="#4ad4ff" stop-opacity=".9"/>
            </linearGradient>
          </defs>
          <rect x="20" y="20" width="360" height="280" rx="22" fill="url(#mg)" opacity=".25"/>
          <g opacity=".9">
            <circle cx="140" cy="160" r="80" fill="#8b7bff" opacity=".35"/>
            <circle cx="220" cy="140" r="60" fill="#4ad4ff" opacity=".35"/>
            <circle cx="260" cy="190" r="70" fill="#2ed47a" opacity=".25"/>
          </g>
          <text x="200" y="170" text-anchor="middle" fill="#eef0ff" font-size="22" font-weight="800" opacity=".9" id="modalMediaText">Varnika</text>
        </svg>
      </div>
      <div class="modal-body">
        <h3 id="modalTitle">Product</h3>
        <p id="modalMeta" style="margin-bottom:14px">Category â€¢ Color</p>
        <div class="row" style="margin-bottom:14px">
          <div class="price" id="modalPrice">$0.00</div>
          <div class="qty" id="modalQty">
            <button aria-label="Decrease" data-step="-1">âˆ’</button>
            <span data-qty>1</span>
            <button aria-label="Increase" data-step="1">+</button>
          </div>
        </div>
        <div style="display:flex; gap:10px; flex-wrap:wrap">
          <button class="btn" id="modalAdd">Add to cart</button>
          <button class="btn alt" id="modalClose">Close</button>
        </div>
        <p style="margin-top:12px; font-size:13px; color:var(--muted)">Soft-touch fabric. Ethically made. True-to-size fit.</p>
      </div>
    </div>
  </div>

  <script>
    // Sample products
    const PRODUCTS = [
      {id:'p1', name:'Aura Tee', price:24.00, category:'Tops', color:'Lilac', badge:'New'},
      {id:'p2', name:'Ocean Linen Shirt', price:36.00, category:'Tops', color:'Ocean', badge:'New'},
      {id:'p3', name:'Drift Midi Dress', price:58.00, category:'Dresses', color:'Sand', badge:'Hot'},
      {id:'p4', name:'Nimbus Hoodie', price:48.00, category:'Outerwear', color:'Graphite', badge:'Hot'},
      {id:'p5', name:'Serene Joggers', price:44.00, category:'Bottoms', color:'Mist', badge:'â€”'},
      {id:'p6', name:'Wave Denim Jacket', price:72.00, category:'Outerwear', color:'Stone', badge:'â€”'},
      {id:'p7', name:'Flow Skirt', price:39.00, category:'Bottoms', color:'Pearl', badge:'â€”'},
      {id:'p8', name:'Halo Cap', price:22.00, category:'Accessories', color:'Slate', badge:'â€”'},
    ];

    // State
    const state = {
      filter:'all',
      search:'',
      cart: {}, // id -> {id, name, price, qty}
    };

    // Elements
    const grid = document.getElementById('productGrid');
    const countVisible = document.getElementById('countVisible');
    const searchInput = document.getElementById('searchInput');
    const chips = document.querySelectorAll('.chip');
    const cartBtn = document.getElementById('openCart');
    const closeCartBtn = document.getElementById('closeCart');
    const drawer = document.getElementById('cartDrawer');
    const overlay = document.getElementById('overlay');
    const cartItems = document.getElementById('cartItems');
    const subtotalEl = document.getElementById('subtotal');
    const totalEl = document.getElementById('total');
    const cartCount = document.getElementById('cartCount');
    const yearEl = document.getElementById('year');
    const checkoutBtn = document.getElementById('checkoutBtn');

    // Modal elements
    const modal = document.getElementById('quickModal');
    const modalTitle = document.getElementById('modalTitle');
    const modalMeta = document.getElementById('modalMeta');
    const modalPrice = document.getElementById('modalPrice');
    const modalMediaText = document.getElementById('modalMediaText');
    const modalAdd = document.getElementById('modalAdd');
    const modalClose = document.getElementById('modalClose');
    const modalQty = document.getElementById('modalQty');
    let modalProduct = null;
    let modalQtyValue = 1;

    // Utils
    const fmt = (n)=>'$'+n.toFixed(2);

    // Render product grid
    function renderGrid(){
      const q = state.search.trim().toLowerCase();
      const filtered = PRODUCTS.filter(p=>{
        const f = state.filter==='all' || p.category===state.filter;
        const s = !q || (p.name.toLowerCase().includes(q) || p.category.toLowerCase().includes(q) || p.color.toLowerCase().includes(q));
        return f && s;
      });
      countVisible.textContent = filtered.length;

      // Minimal re-render: replace children as needed
      grid.innerHTML = '';
      for(const p of filtered){
        const card = document.createElement('article');
        card.className = 'card';
        card.setAttribute('data-id', p.id);
        card.innerHTML = `
          <div class="thumb">
            ${p.badge && p.badge!=='â€”' ? `<span class="pill">${p.badge}</span>` : ''}
            <svg viewBox="0 0 400 300" aria-hidden="true">
              <defs>
                <linearGradient id="pg-${p.id}" x1="0" x2="1">
                  <stop offset="0" stop-color="#8b7bff" stop-opacity=".9"/>
                  <stop offset="1" stop-color="#4ad4ff" stop-opacity=".9"/>
                </linearGradient>
              </defs>
              <rect x="20" y="20" width="360" height="260" rx="22" fill="url(#pg-${p.id})" opacity=".22"/>
              <g opacity=".9">
                <circle cx="140" cy="150" r="70" fill="#8b7bff" opacity=".35"/>
                <circle cx="220" cy="130" r="52" fill="#4ad4ff" opacity=".35"/>
                <circle cx="260" cy="180" r="62" fill="#2ed47a" opacity=".25"/>
              </g>
              <text x="200" y="160" text-anchor="middle" fill="#eef0ff" font-size="20" font-weight="800" opacity=".9">${p.name}</text>
            </svg>
          </div>
          <div class="card-body">
            <h3 class="title">${p.name}</h3>
            <div class="meta">${p.category} â€¢ ${p.color}</div>
            <div class="price-row">
              <div class="price">${fmt(p.price)}</div>
              <div style="display:flex; gap:8px">
                <button class="add" data-action="quick" aria-label="Quick view">Quick view</button>
                <button class="add" data-action="add" aria-label="Add to cart">Add</button>
              </div>
            </div>
          </div>
        `;
        grid.appendChild(card);
      }
    }

    // Cart rendering
    function renderCart(){
      const ids = Object.keys(state.cart);
      if(ids.length===0){
        cartItems.innerHTML = '<div class="cart-empty">Your cart is empty. Start exploring the collection!</div>';
      }else{
        cartItems.innerHTML = '';
        ids.forEach(id=>{
          const item = state.cart[id];
          const el = document.createElement('div');
          el.className = 'cart-item';
          el.setAttribute('data-id', id);
          el.innerHTML = `
            <div class="thumb-sm"></div>
            <div>
              <div style="display:flex; justify-content:space-between; gap:8px">
                <strong>${item.name}</strong>
                <span>${fmt(item.price)}</span>
              </div>
              <div class="meta">${PRODUCTS.find(p=>p.id===id)?.category || ''} â€¢ ${PRODUCTS.find(p=>p.id===id)?.color || ''}</div>
              <div style="display:flex; align-items:center; justify-content:space-between; gap:6px; margin-top:6px">
                <div class="qty">
                  <button aria-label="Decrease" data-step="-1">âˆ’</button>
                  <span data-qty>${item.qty}</span>
                  <button aria-label="Increase" data-step="1">+</button>
                </div>
                <span class="link" data-remove>Remove</span>
              </div>
            </div>
            <div style="text-align:right; font-weight:800">${fmt(item.price*item.qty)}</div>
          `;
          cartItems.appendChild(el);
        });
      }

      // Totals
      const subtotal = Object.values(state.cart).reduce((a,b)=>a + b.price*b.qty, 0);
      subtotalEl.textContent = fmt(subtotal);
      totalEl.textContent = fmt(subtotal); // demo: shipping/tax not calculated
      const count = Object.values(state.cart).reduce((a,b)=>a + b.qty, 0);
      cartCount.textContent = count;
      cartCount.style.display = count>0 ? 'inline-block' : 'none';
    }

    // Cart operations
    function addToCart(product, qty=1){
      const cur = state.cart[product.id];
      if(cur){
        cur.qty += qty;
      }else{
        state.cart[product.id] = {id:product.id, name:product.name, price:product.price, qty:qty};
      }
      renderCart();
    }
    function updateCartQty(id, delta){
      const item = state.cart[id];
      if(!item) return;
      item.qty += delta;
      if(item.qty<=0) delete state.cart[id];
      renderCart();
    }
    function removeFromCart(id){
      delete state.cart[id];
      renderCart();
    }

    // Drawer + overlay
    function openDrawer(){
      drawer.classList.add('open');
      drawer.setAttribute('aria-hidden','false');
      overlay.classList.add('show');
    }
    function closeDrawer(){
      drawer.classList.remove('open');
      drawer.setAttribute('aria-hidden','true');
      overlay.classList.remove('show');
    }

    // Modal
    function openModal(p){
      modalProduct = p;
      modalQtyValue = 1;
      modalTitle.textContent = p.name;
      modalMeta.textContent = p.category + ' â€¢ ' + p.color;
      modalPrice.textContent = fmt(p.price);
      modalMediaText.textContent = p.name;
      modal.querySelector('[data-qty]').textContent = modalQtyValue;
      modal.classList.add('show');
      overlay.classList.add('show');
      modal.setAttribute('aria-hidden','false');
    }
    function closeModal(){
      modal.classList.remove('show');
      overlay.classList.remove('show');
      modal.setAttribute('aria-hidden','true');
    }

    // Events
    document.addEventListener('click', (e)=>{
      const t = e.target;

      // Filter chips
      if(t.classList.contains('chip')){
        chips.forEach(c=>c.classList.remove('active'));
        t.classList.add('active');
        state.filter = t.getAttribute('data-filter');
        renderGrid();
      }

      // Grid actions
      if(t.matches('.add')){
        const card = t.closest('.card');
        const id = card?.getAttribute('data-id');
        const product = PRODUCTS.find(p=>p.id===id);
        if(!product) return;
        const action = t.getAttribute('data-action');
        if(action==='add'){
          addToCart(product, 1);
        }else if(action==='quick'){
          openModal(product);
        }
      }

      // Drawer controls
      if(t.id==='openCart'){ openDrawer(); }
      if(t.id==='closeCart'){ closeDrawer(); }
      if(t===overlay){
        // close modal first if open, else cart
        if(modal.classList.contains('show')) closeModal();
        else closeDrawer();
      }

      // Cart item qty/remove
      if(t.closest('.cart-item')){
        const itemEl = t.closest('.cart-item');
        const id = itemEl.getAttribute('data-id');
        if(t.hasAttribute('data-remove')) removeFromCart(id);
        if(t.hasAttribute('data-step')){
          const step = parseInt(t.getAttribute('data-step'),10) || 0;
          updateCartQty(id, step);
        }
      }

      // Modal interactions
      if(t===modalClose) closeModal();
      if(t===modalAdd && modalProduct){
        addToCart(modalProduct, modalQtyValue);
        closeModal();
        openDrawer();
      }
      if(t.closest('#modalQty') && t.hasAttribute('data-step')){
        const step = parseInt(t.getAttribute('data-step'),10) || 0;
        modalQtyValue = Math.max(1, modalQtyValue + step);
        modalQty.querySelector('[data-qty]').textContent = modalQtyValue;
      }

      // Hero CTA shortcuts
      if(t.id==='shopNew'){
        state.filter='Tops';
        chips.forEach(c=> c.getAttribute('data-filter')==='Tops' ? c.classList.add('active') : c.classList.remove('active'));
        renderGrid();
        window.scrollTo({top: document.querySelector('.filters').offsetTop - 70, behavior:'smooth'});
      }
      if(t.id==='shopBest'){
        state.filter='Outerwear';
        chips.forEach(c=> c.getAttribute('data-filter')==='Outerwear' ? c.classList.add('active') : c.classList.remove('active'));
        renderGrid();
        window.scrollTo({top: document.querySelector('.filters').offsetTop - 70, behavior:'smooth'});
      }
    });

    searchInput.addEventListener('input', ()=>{
      state.search = searchInput.value;
      renderGrid();
    });

    cartBtn.addEventListener('click', openDrawer);
    closeCartBtn.addEventListener('click', closeDrawer);
    overlay.addEventListener('click', ()=>{}); // handled in delegation

    checkoutBtn.addEventListener('click', ()=>{
      if(Object.keys(state.cart).length===0){
        alert('Your cart is empty.');
        return;
      }
      const lines = Object.values(state.cart).map(i=> `${i.qty} Ã— ${i.name} â€” ${fmt(i.price*i.qty)}`);
      const total = Object.values(state.cart).reduce((a,b)=>a+b.price*b.qty,0);
      alert('Demo Checkout â€” Order Summary:\n\n' + lines.join('\n') + '\n\nTotal: ' + fmt(total) + '\n\nThis is a demo. No payment processed.');
    });

    // Init
    function init(){
      yearEl.textContent = new Date().getFullYear();
      renderGrid();
      renderCart();
      cartCount.style.display = 'none';
    }
    init();
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97e14bab10ec2faa',t:'MTc1NzY5OTkzNC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
